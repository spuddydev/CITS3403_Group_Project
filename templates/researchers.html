{% extends 'base.html' %}

{% block title %}Researchers - ResearchMatch{% endblock %}

{% block content %}
<div class="content-container">
    <div class="page-header">
        <h1>Research Researchers</h1>
        <p class="text-muted">Connect with faculty members supervising research projects</p>
    </div>

    <div class="search-container" style="margin-bottom: 25px;">
        <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" id="researcher-search" placeholder="Search by name or research area...">
        </div>
    </div>

    <div class="researchers-container">
        {% for researcher in researchers %}
        <div class="researcher-card" data-name="{{ researcher.first_name|lower }} {{ researcher.last_name|lower }}" style="margin-bottom: 20px;">
            <div class="researcher-avatar">
                {{ researcher.first_name[0] }}{{ researcher.last_name[0] }}
            </div>

            <div class="researcher-info">
                <h3 class="researcher-name">{{ researcher.first_name }} {{ researcher.last_name }}</h3>

                <div class="researcher-contact" style="margin-bottom: 10px;">
                    {% if researcher.email %}
                    <a href="mailto:{{ researcher.email }}" class="contact-link">
                        <i class="fas fa-envelope"></i> {{ researcher.email }}
                    </a>
                    {% endif %}
                </div>

                <div class="researcher-projects" style="margin-bottom: 15px;">
                    <h4 style="margin-bottom: 10px;">Research Projects</h4>
                    <ul class="projects-list">
                        {% for project in researcher.projects %}
                        <li class="project-item" style="margin-bottom: 8px;">
                            <a href="{{ project.link }}" target="_blank" class="project-link">{{ project.title }}</a>
                            <span class="project-status {{ 'open' if project.is_open else 'closed' }}">
                                {{ 'Open' if project.is_open else 'Closed' }}
                            </span>
                        </li>
                        {% else %}
                        <li class="no-projects">No active projects found</li>
                        {% endfor %}
                    </ul>
                </div>

                <div class="researcher-actions" style="margin-top: 15px;">
                    <button class="btn primary connect-btn">
                        <i class="fas fa-user-plus"></i> Connect
                    </button>
                    <button class="btn secondary message-btn">
                        <i class="fas fa-envelope"></i> Message
                    </button>
                </div>
            </div>
        </div>
        {% else %}
        <div class="empty-state">
            <p>No researchers found in the database.</p>
        </div>
        {% endfor %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('researcher-search');
    const researcherCards = document.querySelectorAll('.researcher-card');

    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.trim().toLowerCase();

        researcherCards.forEach(card => {
            const name = card.getAttribute('data-name');
            if (name.includes(searchTerm)) {
                card.style.display = '';
            } else {
                card.style.display = 'none';
            }
        });
    });
});
</script>
{% endblock %}
